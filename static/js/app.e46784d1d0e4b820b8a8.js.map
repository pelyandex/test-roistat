{"version":3,"sources":["webpack:///./src/common/js/tree_builder.js","webpack:///src/components/TreeItem.vue","webpack:///./src/common/js/utilites.js","webpack:///./src/components/TreeItem.vue?989e","webpack:///./src/components/TreeItem.vue","webpack:///src/components/Modal.vue","webpack:///./src/components/Modal.vue?60be","webpack:///./src/components/Modal.vue","webpack:///src/components/TreeTable.vue","webpack:///./src/components/TreeTable.vue?e748","webpack:///./src/components/TreeTable.vue","webpack:///src/App.vue","webpack:///./src/App.vue?e183","webpack:///./src/App.vue","webpack:///./src/plugins/bootstrap-vue.js","webpack:///./src/main.js"],"names":["treeBuilder","arr","arguments","length","undefined","Array","filledNodes","map","clearNode","extends_default","node","show","childNodes","filter","folder","parentId","rootNodes","forEach","el","filler","root","child","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","get_iterator_default","next","done","value","id","push","err","return","TreeItem","name","props","data","localItems","watch","treeItems","immediate","handler","this","clone_deep_default","localSort","sortDirection","methods","_sortDirection","type","direction","sort","a","b","lsValue","rsValue","localeCompare","compareStrings","reShow","item","items","concat","toConsumableArray_default","find","changeCallback","shift","width","req","marginLeft","paddingLeft","components_TreeItem","render","_vm","_h","$createElement","_c","_self","_l","key","staticClass","style","on","click","$event","_v","_s","_e","attrs","title","phone","directives","rawName","expression","tree-items","sort-direction","change-callback","staticRenderFns","Modal","parent","selectOptions","addWorker","mapWorkersIds","maxId","Math","max","apply","model","closeModal","$emit","setItems","mapWorkersOptions","text","clearForm","showModal","components_Modal","no-close-on-backdrop","centered","scopedSlots","_u","fn","proxy","disabled","variant","callback","$$v","options","TreeTable","components","__webpack_require__","normalizeComponent","ssrContext","Modal_normalizeComponent","val","mounted","storageItems","window","localStorage","getItem","JSON","parse","addEventListener","setStorage","beforeDestroy","setItem","stringify_default","removeEventListener","changeSort","prevType","deleteAll","addPerson","persona","components_TreeTable","show-modal","update:showModal","update:show-modal","App","TreeTable_normalizeComponent","selectortype_template_index_0_src_App","src_App","App_normalizeComponent","Vue","use","BootstrapVue","config","productionTip","template"],"mappings":"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","file":"static/js/app.e46784d1d0e4b820b8a8.js","sourcesContent":["// Связывает папки между собой в иерархии дерева\nfunction filler (root, child) {\n  for (const el of root) {\n    if (el.id === child.parentId) {\n      el.node.push(child)\n      return\n    }\n    if (el.node.length !== 0) {\n      filler(el.node, child)\n    }\n  }\n}\n\nexport function treeBuilder (arr = []) {\n  if (!(arr instanceof Array) || arr.length === 0) {\n    return []\n  }\n  // Строит узлы\n  const filledNodes = arr\n    .map(clearNode => (\n      {\n        ...clearNode,\n        node: [],\n        show: clearNode.show || false\n      }\n    ))\n  // Все дочернии элементы\n  const childNodes = filledNodes.filter(folder => folder.parentId !== null)\n  // Все рут-элементы\n  const rootNodes = filledNodes.filter(folder => folder.parentId === null)\n  // Связываем рут-элементы с дочерними элементами\n  childNodes.forEach(el => filler(rootNodes, el))\n  return rootNodes\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/tree_builder.js","<template>\n  <div>\n    <div\n      v-for='node of localItems'\n      :key='node.id'\n    >\n      <div class='table-head table-row'>\n        <div\n          :style='shift(node)'\n          class='tree-item table-head__item align-left'\n        >\n          <span\n            @click='reShow(node)'\n            v-if='node.node.length > 0'\n            class='arrow'\n          >\n            {{ node.show ? '&uarr;' : '&darr;'  }}\n          </span>\n          <span :title='node.name'>\n            {{node.name}}\n          </span>\n        </div>\n        <div class='tree-item table-head__item align-center'>{{node.phone}}</div>\n      </div>\n      <TreeItem\n        v-if='node.node.length > 0'\n        v-show='node.show'\n        :req='req + 10 || 10'\n        :tree-items='node.node'\n        :sort-direction='sortDirection'\n        :items='items'\n        :change-callback='changeCallback'\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport deep from 'clone-deep'\nimport { compareStrings } from '@/common/js/utilites'\n\nexport default {\n  name: 'TreeItem',\n  props: ['treeItems', 'items', 'changeCallback', 'req', 'sortDirection'],\n  data: () => ({\n    localItems: []\n  }),\n  watch: {\n    treeItems: {\n      immediate: true,\n      handler () {\n        this.localItems = deep(this.treeItems)\n        this.localSort()\n      }\n    },\n    sortDirection () {\n      this.localSort()\n    }\n  },\n  methods: {\n    localSort () {\n      const { type, direction } = this.sortDirection\n      this.localItems.sort((a, b) => compareStrings(a[type], b[type], direction))\n    },\n    reShow (item) {\n      const items = [...this.items]\n      items.find(el => el.id === item.id).show = !item.show\n      this.changeCallback(items)\n    },\n    shift (node) {\n      return {\n        width: `calc(50% - ${this.req}px)`,\n        marginLeft: `${this.req || 0}px`,\n        paddingLeft: `${node.node.length !== 0 ? '20px' : '10px'}`\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .tree-item {\n    position: relative;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  .table-row {\n    border-bottom: 1px solid silver;\n  }\n  .table-row:hover {\n    background-color: rgba(150, 150, 150, 0.3);\n  }\n  .arrow {\n    cursor: pointer;\n    position:absolute;\n    top:0;\n    left:10px\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/TreeItem.vue","// тк телефон не будет являться числом - локальная сортировка подходит для обоих случаев\nexport function compareStrings (lsValue, rsValue, direction) {\n  if (direction > 0) {\n    return lsValue.localeCompare(rsValue)\n  }\n  return rsValue.localeCompare(lsValue)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/utilites.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((_vm.localItems),function(node){return _c('div',{key:node.id},[_c('div',{staticClass:\"table-head table-row\"},[_c('div',{staticClass:\"tree-item table-head__item align-left\",style:(_vm.shift(node))},[(node.node.length > 0)?_c('span',{staticClass:\"arrow\",on:{\"click\":function($event){return _vm.reShow(node)}}},[_vm._v(\"\\n          \"+_vm._s(node.show ? '↑' : '↓')+\"\\n        \")]):_vm._e(),_vm._v(\" \"),_c('span',{attrs:{\"title\":node.name}},[_vm._v(\"\\n          \"+_vm._s(node.name)+\"\\n        \")])]),_vm._v(\" \"),_c('div',{staticClass:\"tree-item table-head__item align-center\"},[_vm._v(_vm._s(node.phone))])]),_vm._v(\" \"),(node.node.length > 0)?_c('TreeItem',{directives:[{name:\"show\",rawName:\"v-show\",value:(node.show),expression:\"node.show\"}],attrs:{\"req\":_vm.req + 10 || 10,\"tree-items\":node.node,\"sort-direction\":_vm.sortDirection,\"items\":_vm.items,\"change-callback\":_vm.changeCallback}}):_vm._e()],1)}),0)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-13831281\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/TreeItem.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-13831281\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TreeItem.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreeItem.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreeItem.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-13831281\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./TreeItem.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-13831281\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TreeItem.vue\n// module id = null\n// module chunks = ","<template>\n  <b-modal\n    v-model='showModal'\n    no-close-on-backdrop\n    centered\n    @show='setItems'\n    title='Добавить сотрудника'\n  >\n    <template #modal-header>\n      Добавить сотрудника\n    </template>\n    <div>\n      <span>Имя сотрудника</span>\n      <b-input v-model='name'></b-input>\n    </div>\n    <div>\n      <span>Телефон</span>\n      <b-input\n        v-model='phone'\n        type='number'\n      ></b-input>\n    </div>\n    <div>\n      <span>Отвественное лицо</span>\n      <b-form-select\n        v-model='parent'\n        :options='selectOptions'\n      ></b-form-select>\n    </div>\n    <template #modal-footer>\n      <b-button\n        :disabled='name.length === 0 || phone.length === 0'\n        variant='primary'\n        @click='addWorker'\n      >\n        Добавить\n      </b-button>\n      <b-button\n        variant='secondary'\n        @click='closeModal'\n      >\n        Закрыть\n      </b-button>\n    </template>\n  </b-modal>\n</template>\n\n<script>\nexport default {\n  props: ['showModal', 'items'],\n  data: () => ({\n    name: '',\n    phone: '',\n    parent: null,\n    selectOptions: []\n  }),\n  methods: {\n    addWorker () {\n      const mapWorkersIds = this.items.length === 0 ? [0] : this.items.map(el => el.id)\n      const maxId = Math.max(...mapWorkersIds)\n      const model = {\n        name: this.name,\n        phone: this.phone,\n        parentId: this.parent,\n        id: maxId + 1,\n        show: false,\n        node: []\n      }\n      this.closeModal()\n      this.$emit('addPerson', model)\n    },\n    setItems () {\n      const mapWorkersOptions = this.items.map(item => ({ value: item.id, text: item.name }))\n      mapWorkersOptions.push({ text: 'Без ответственного', value: null })\n      this.selectOptions = mapWorkersOptions\n      this.parent = null\n    },\n    clearForm () {\n      this.name = ''\n      this.phone = ''\n    },\n    closeModal () {\n      this.clearForm()\n      this.$emit('update:showModal', !this.showModal)\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Modal.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{attrs:{\"no-close-on-backdrop\":\"\",\"centered\":\"\",\"title\":\"Добавить сотрудника\"},on:{\"show\":_vm.setItems},scopedSlots:_vm._u([{key:\"modal-header\",fn:function(){return [_vm._v(\"\\n    Добавить сотрудника\\n  \")]},proxy:true},{key:\"modal-footer\",fn:function(){return [_c('b-button',{attrs:{\"disabled\":_vm.name.length === 0 || _vm.phone.length === 0,\"variant\":\"primary\"},on:{\"click\":_vm.addWorker}},[_vm._v(\"\\n      Добавить\\n    \")]),_vm._v(\" \"),_c('b-button',{attrs:{\"variant\":\"secondary\"},on:{\"click\":_vm.closeModal}},[_vm._v(\"\\n      Закрыть\\n    \")])]},proxy:true}]),model:{value:(_vm.showModal),callback:function ($$v) {_vm.showModal=$$v},expression:\"showModal\"}},[_vm._v(\" \"),_c('div',[_c('span',[_vm._v(\"Имя сотрудника\")]),_vm._v(\" \"),_c('b-input',{model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1),_vm._v(\" \"),_c('div',[_c('span',[_vm._v(\"Телефон\")]),_vm._v(\" \"),_c('b-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}})],1),_vm._v(\" \"),_c('div',[_c('span',[_vm._v(\"Отвественное лицо\")]),_vm._v(\" \"),_c('b-form-select',{attrs:{\"options\":_vm.selectOptions},model:{value:(_vm.parent),callback:function ($$v) {_vm.parent=$$v},expression:\"parent\"}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-232e219a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Modal.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-232e219a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Modal.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Modal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Modal.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-232e219a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Modal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Modal.vue\n// module id = null\n// module chunks = ","<template>\n  <div class='main'>\n    <div\n      class='table'\n      v-if='treeItems.length > 0'\n    >\n      <div class='table-head'>\n        <span\n          class='table-head__item pointer align-center'\n          @click='changeSort(\"name\")'\n        >\n          Имя\n        </span>\n        <span\n          class='table-head__item pointer align-center'\n          @click='changeSort(\"phone\")'\n        >\n          Телефон\n        </span>\n      </div>\n      <TreeItem\n        class='tree-items'\n        :tree-items='treeItems'\n        :items='items'\n        :change-callback='changeCallback'\n        :sort-direction='sortDirection'\n      />\n    </div>\n    <div v-else>\n      Добавьте сотрудников\n    </div>\n    <div class='button-container'>\n      <b-button\n        class='button'\n        variant='primary'\n        @click='showModal = !showModal'\n      >\n        Добавить\n      </b-button>\n      <b-button\n        v-if='treeItems.length > 0'\n        class='button'\n        variant='danger'\n        @click='deleteAll'\n      >\n        Удалить все\n      </b-button>\n    </div>\n    <Modal\n      :show-modal.sync='showModal'\n      :items='items'\n      @addPerson='addPerson'\n    />\n  </div>\n</template>\n\n<script>\nimport { treeBuilder } from '@/common/js/tree_builder'\nimport TreeItem from '@/components/TreeItem'\nimport Modal from '@/components/Modal'\n\nexport default {\n  components: {\n    TreeItem,\n    Modal\n  },\n  data: () => ({\n    items: [],\n    treeItems: [],\n    sortDirection: {\n      type: 'name',\n      direction: 1\n    },\n    showModal: false\n  }),\n  watch: {\n    items (val) {\n      this.treeItems = treeBuilder(val)\n    }\n  },\n  mounted () {\n    const storageItems = window.localStorage.getItem('tree-table-test') || '[]'\n    this.items = JSON.parse(storageItems)\n    window.addEventListener('unload', this.setStorage)\n  },\n  beforeDestroy () {\n    this.setStorage()\n  },\n  methods: {\n    setStorage () {\n      window.localStorage.setItem('tree-table-test', JSON.stringify(this.items.map(el => ({ ...el, show: false }))))\n      window.removeEventListener('unload', this.setStorage)\n    },\n    changeSort (type) {\n      const prevType = this.sortDirection.type\n      const { direction } = this.sortDirection\n      const sortDirection = { type }\n      if (prevType === type) {\n        sortDirection.direction = direction > 0 ? -1 : 1\n      }\n      this.sortDirection = sortDirection\n    },\n    deleteAll () {\n      this.items = []\n    },\n    addPerson (persona) {\n      this.items.push(persona)\n    },\n    changeCallback (value) {\n      // Чтобы избавиться от лишнего ререндера можно написать алгоритм слияния, либо обход дерева с модификацией узла.\n      this.items = value\n    }\n  }\n}\n</script>\n\n<style lang='scss'>\n.main {\n  position: relative;\n  width: 600px;\n  text-align: center;\n}\n.tree-items {\n  max-height: 300px;\n  overflow-y: auto;\n}\n.button {\n  margin-left: 10px;\n}\n.button-container {\n  position: absolute;\n  bottom: 20px;\n  right: 15px;\n}\n.table {\n  min-height: 400px;\n  &-head {\n    padding: 10px 0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid silver;\n    &__item {\n      width: 50%;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/TreeTable.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[(_vm.treeItems.length > 0)?_c('div',{staticClass:\"table\"},[_c('div',{staticClass:\"table-head\"},[_c('span',{staticClass:\"table-head__item pointer align-center\",on:{\"click\":function($event){return _vm.changeSort(\"name\")}}},[_vm._v(\"\\n        Имя\\n      \")]),_vm._v(\" \"),_c('span',{staticClass:\"table-head__item pointer align-center\",on:{\"click\":function($event){return _vm.changeSort(\"phone\")}}},[_vm._v(\"\\n        Телефон\\n      \")])]),_vm._v(\" \"),_c('TreeItem',{staticClass:\"tree-items\",attrs:{\"tree-items\":_vm.treeItems,\"items\":_vm.items,\"change-callback\":_vm.changeCallback,\"sort-direction\":_vm.sortDirection}})],1):_c('div',[_vm._v(\"\\n    Добавьте сотрудников\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"button-container\"},[_c('b-button',{staticClass:\"button\",attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){_vm.showModal = !_vm.showModal}}},[_vm._v(\"\\n      Добавить\\n    \")]),_vm._v(\" \"),(_vm.treeItems.length > 0)?_c('b-button',{staticClass:\"button\",attrs:{\"variant\":\"danger\"},on:{\"click\":_vm.deleteAll}},[_vm._v(\"\\n      Удалить все\\n    \")]):_vm._e()],1),_vm._v(\" \"),_c('Modal',{attrs:{\"show-modal\":_vm.showModal,\"items\":_vm.items},on:{\"update:showModal\":function($event){_vm.showModal=$event},\"update:show-modal\":function($event){_vm.showModal=$event},\"addPerson\":_vm.addPerson}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ddbb74d4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/TreeTable.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ddbb74d4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TreeTable.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreeTable.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreeTable.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ddbb74d4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./TreeTable.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TreeTable.vue\n// module id = null\n// module chunks = ","<template>\n  <div id='app'>\n    <TreeTable />\n  </div>\n</template>\n\n<script>\nimport TreeTable from '@/components/TreeTable'\n\nexport default {\n  name: 'App',\n  components: {\n    TreeTable\n  }\n}\n</script>\n\n<style>\n#app {\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('TreeTable')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8218bb12\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8218bb12\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8218bb12\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\n\nimport BootstrapVue from 'bootstrap-vue'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\n\nVue.use(BootstrapVue)\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/bootstrap-vue.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport './plugins/bootstrap-vue'\nimport './common/css/global.css'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}